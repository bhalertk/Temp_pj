<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>題目查詢</title>
<style>
  button { margin: 5px; padding: 8px 12px; }
  ul { list-style: none; padding: 0; }
  li { padding: 8px; border-bottom: 1px solid #ddd; }
  li span { display:block; }
  li span.question { font-weight: bold; }
  li span.answer { color: blue; margin-left: 10px; }
</style>
</head>
<body>

<h2>題目查詢</h2>
<div id="container">載入中...</div>

<!-- 引入 PapaParse 讀 CSV -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
let groups = {};
let container = document.getElementById("container");

// 從 CSV 檔案讀資料（假設檔名是 questions.csv）
Papa.parse("questions.csv", {
  download: true,
  header: true, // 第一列是標題：答案,題目
  complete: function(results) {
    let data = results.data;

    // 依題目第一個字分組
    data.forEach(item => {
      if(!item.題目) return; // 避免空列
      let first = item.題目[0];
      if(!groups[first]) groups[first] = [];
      groups[first].push(item);
    });

    showButtons();
  }
});

// 顯示「開頭字」按鈕
function showButtons() {
  container.innerHTML = "<h3>請選擇題目開頭字</h3>";
  for(let key in groups){
    let btn = document.createElement("button");
    btn.textContent = key;
    btn.onclick = () => showQA(key);
    container.appendChild(btn);
  }
}

// 顯示該開頭字的所有 題目+答案
function showQA(letter){
  container.innerHTML = `<h3>${letter} 開頭的題目與答案</h3>`;
  let ul = document.createElement("ul");
  groups[letter].forEach(item => {
    let li = document.createElement("li");
    li.innerHTML = `<span class="question">題目：${item.題目}</span>
                    <span class="answer">答案：${item.答案}</span>`;
    ul.appendChild(li);
  });
  container.appendChild(ul);

  // 返回按鈕
  let backBtn = document.createElement("button");
  backBtn.textContent = "返回字母清單";
  backBtn.onclick = showButtons;
  container.appendChild(backBtn);
}
</script>
</body>
</html>
